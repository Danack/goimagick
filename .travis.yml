sudo: false
language: go
go_import_path: gopkg.in/gographics/imagick.v2
go:
 - 1.6
 #- 1.5
 #- 1.4
cache:
    directories:
        - $HOME/im
env:
    #- IMAGEMAGICK_VERSION=git7
    #- IMAGEMAGICK_VERSION=git6
    #- IMAGEMAGICK_VERSION=7.0.1-0
    - IMAGEMAGICK_VERSION=6.9.4-10
    # - IMAGEMAGICK_VERSION=6.8.7-0
    #- IMAGEMAGICK_VERSION=6.7.5-3
    #- IMAGEMAGICK_VERSION=6.6.0-9
    #- IMAGEMAGICK_VERSION=6.5.3-10
    # Include individual commits like this:
    # - IMAGEMAGICK_VERSION=commit_25553302a6d5f736b55e60109600dfbce5fbea48

#matrix:
#  exclude:
#    - php: 5.3
#      env: IMAGEMAGICK_VERSION=6.8.7-0
before_install:
    - bash ./imagemagick_dependency.sh "${IMAGEMAGICK_VERSION}"
    - pkg-config --cflags --libs MagickWand
    - convert --version

# debugging why this is borked.
install:

# GOPATH
before_script:
    - echo "this is the before"
    - pwd
    - for i in ./imagick/*.go; do echo $i; done
    - for i in ./examples/*.go; do echo $i; done
    

script:
    #- go get -t -v ./...
    # - go test -v
    # - go test -v ./...
    # - go vet ./...    

matrix:
  allow_failures:
    - env: IMAGEMAGICK_VERSION=git6
    - env: IMAGEMAGICK_VERSION=git7
